<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Help Us Help You: Things to try before asking for help | DSC 106</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Help Us Help You: Things to try before asking for help" /><meta name="author" content="Sam Lau" /><meta property="og:locale" content="en_US" /><meta name="description" content="DSC 106, Winter 2025 at UC San Diego" /><meta property="og:description" content="DSC 106, Winter 2025 at UC San Diego" /><link rel="canonical" href="http://localhost:4000/labs/debugging/" /><meta property="og:url" content="http://localhost:4000/labs/debugging/" /><meta property="og:site_name" content="DSC 106" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Help Us Help You: Things to try before asking for help" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Sam Lau"},"description":"DSC 106, Winter 2025 at UC San Diego","headline":"Help Us Help You: Things to try before asking for help","url":"http://localhost:4000/labs/debugging/"}</script> <script type="module" src="/assets/global.js"></script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> DSC 106 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">🏠 Home</a><li class="nav-list-item"><a href="/syllabus/" class="nav-list-link">📖 Syllabus</a><li class="nav-list-item"><a href="/calendar/" class="nav-list-link">📆 Calendar</a><li class="nav-list-item"><a href="/tech_support/" class="nav-list-link">🙋‍♂️ Tech Support</a><li class="nav-list-item"><a href="/resources/" class="nav-list-link">📚 Resources</a><li class="nav-list-item"><a href="/staff/" class="nav-list-link">👩‍🏫 Staff</a><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in 👩‍🔬 Programming Labs category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/labs/" class="nav-list-link">👩‍🔬 Programming Labs</a><ul class="nav-list "><li class="nav-list-item active"><a href="/labs/debugging/" class="nav-list-link active">Help Us Help You: Things to try before asking for help</a><li class="nav-list-item "><a href="/labs/lab00/" class="nav-list-link">Lab 0: Setup</a><li class="nav-list-item "><a href="/labs/lab01/" class="nav-list-link">Lab 1: Introduction to the Web platform</a><li class="nav-list-item "><a href="/labs/lab02/" class="nav-list-link">Lab 2: Styling with CSS</a><li class="nav-list-item "><a href="/labs/lab03/" class="nav-list-link">Lab 3: Introduction to JS</a><li class="nav-list-item "><a href="/labs/lab04/" class="nav-list-link">Lab 4: Svelte (Templating & Control Flow)</a><li class="nav-list-item "><a href="/labs/lab05/" class="nav-list-link">Lab 5: Svelte II (Loading Data & Reactivity)</a><li class="nav-list-item "><a href="/labs/lab06/" class="nav-list-link">Lab 6: Visualizing categorical data with D3</a><li class="nav-list-item "><a href="/labs/lab07/" class="nav-list-link">Lab 7: Visualizing quantitative data with D3</a><li class="nav-list-item "><a href="/labs/lab08/" class="nav-list-link">Lab 8: Geospatial Visualizations</a><li class="nav-list-item "><a href="/labs/lab09/" class="nav-list-link">Lab 9: Animation & Scrollytelling</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in 📝 Projects category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/projects/" class="nav-list-link">📝 Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="/projects/final_project/" class="nav-list-link">Final Project</a><li class="nav-list-item "><a href="/projects/project1/" class="nav-list-link">Project 1: Expository Visualization</a><li class="nav-list-item "><a href="/projects/project2/" class="nav-list-link">Project 2: Deceptive Visualization</a><li class="nav-list-item "><a href="/projects/project2peer/" class="nav-list-link">Project 2: Deceptive Visualization - Peer Grading</a><li class="nav-list-item "><a href="/projects/project3/" class="nav-list-link">Project 3: Interactive Visualization</a><li class="nav-list-item "><a href="/projects/project3peer/" class="nav-list-link">Project 3: Interactive Visualization - Peer Grading</a></ul></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DSC 106" aria-label="Search DSC 106" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="" class="site-button" > 💻 GitHub </a><li class="aux-nav-list-item"> <a href="" class="site-button" > 🙋 Ed </a><li class="aux-nav-list-item"> <a href="" class="site-button" > 💯 Gradescope </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/labs/">👩‍🔬 Programming Labs</a><li class="breadcrumb-nav-list-item"><span>Help Us Help You: Things to try before asking for help</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="help-us-help-you-things-to-try-before-asking-for-help"> <a href="#help-us-help-you-things-to-try-before-asking-for-help" class="anchor-heading" aria-labelledby="help-us-help-you-things-to-try-before-asking-for-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Help Us Help You: Things to try before asking for help</h1><details open=""> <summary class="text-delta"> Table of contents </summary><ul id="markdown-toc"><li><a href="#help-us-help-you-things-to-try-before-asking-for-help" id="markdown-toc-help-us-help-you-things-to-try-before-asking-for-help">Help Us Help You: Things to try before asking for help</a><ul><li><a href="#prevention" id="markdown-toc-prevention">Prevention</a><ul><li><a href="#develop-with-the-browser-dev-tools-open" id="markdown-toc-develop-with-the-browser-dev-tools-open">Develop with the browser dev tools open!</a><li><a href="#understand-what-code-does" id="markdown-toc-understand-what-code-does">Understand what code does</a><li><a href="#use-correct-formatting" id="markdown-toc-use-correct-formatting">Use correct formatting</a></ul><li><a href="#investigation" id="markdown-toc-investigation">Investigation</a><ul><li><a href="#general-advice-reducing-the-issue" id="markdown-toc-general-advice-reducing-the-issue">General advice: Reducing the issue</a><li><a href="#problem-1-the-page-looks-wrong" id="markdown-toc-problem-1-the-page-looks-wrong">Problem 1: The page looks wrong</a><li><a href="#problem-2-the-code-doesnt-work-in-the-way-i-expect" id="markdown-toc-problem-2-the-code-doesnt-work-in-the-way-i-expect">Problem 2: The code doesn’t work in the way I expect</a><li><a href="#problem-3-500-error" id="markdown-toc-problem-3-500-error">Problem 3: 500 error</a></ul><li><a href="#debugging-tools" id="markdown-toc-debugging-tools">Debugging tools</a><ul><li><a href="#the-console" id="markdown-toc-the-console">The Console</a><li><a href="#html-validator" id="markdown-toc-html-validator">HTML validator</a><li><a href="#dev-tools-elements-panel" id="markdown-toc-dev-tools-elements-panel">Dev tools Elements panel</a><li><a href="#console-api" id="markdown-toc-console-api">Console API</a><li><a href="#debugger-statement" id="markdown-toc-debugger-statement"><code class="language-plaintext highlighter-rouge">debugger</code> statement</a><li><a href="#sources-panel" id="markdown-toc-sources-panel">Sources panel</a></ul><li><a href="#resolution" id="markdown-toc-resolution">Resolution</a><li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></ul></ul></details><p>Inevitably, you will run into cases where your code does not produce the expected result. These are called <em>bugs</em>. The process of investigating and fixing these bugs is called <em>debugging</em>. <strong>The vast majority of the time spent programming is actually spent debugging</strong>, especially when you are just starting out. But even seasoned programmers spend <em>far</em> more time debugging than writing code.</p><p>Debugging consists of three steps: 0. <strong>Prevention</strong>: The things you do to minimize bugs and/or make debugging easier.</p><ol><li><strong>Investigation</strong>: What is the issue? What is the code supposed to do, and what is it actually doing?<li><strong>Resolution</strong>: Fixing the problem</ol><h2 id="prevention"> <a href="#prevention" class="anchor-heading" aria-labelledby="prevention"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prevention</h2><p>Prevention consists of adopting good development habits that will either minimize the number of bugs you introduce in the first place, or stop them in their tracks.</p><h3 id="develop-with-the-browser-dev-tools-open"> <a href="#develop-with-the-browser-dev-tools-open" class="anchor-heading" aria-labelledby="develop-with-the-browser-dev-tools-open"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Develop with the browser dev tools open!</h3><p>I really cannot stress this enough. If stuff is not working, the browser dev tools and especially <a href="#the-console">the console</a> is the <em>first</em> place you look for clues. <strong>In fact, most seasoned web developers have dev tools continuously open while working.</strong></p><p>If you see errors in the console, <strong>do not ignore them</strong>. Even if they don’t seem to be related to the issue you’re investigating, they could be a symptom of a larger problem.</p><h3 id="understand-what-code-does"> <a href="#understand-what-code-does" class="anchor-heading" aria-labelledby="understand-what-code-does"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understand what code does</h3><p><strong>Do <em>not</em> copy and paste code without understanding what it does.</strong> If we don’t expect you to understand it, we’ll usually say so. If we give you an entire file or function to copy, it’s typically because it doesn’t matter to understand it (but it’s still beneficial to try).</p><p>But in all other cases, you <em>should</em> understand what the code is doing and why. We give you code because it’s easier to understand existing code and tweak it than to write it from scratch, not to save you the effort of understanding it.</p><p>If you don’t understand what you’re doing and why, you may still be able to guess where things go and move through the steps, but the mismatch between your mental model and what is actually happening will compound as you move through the lab making every step harder than the previous one.</p><p>If there are parts of syntax you don’t understand, it can be hard to google for things. For example, suppose you get to <a href="#step-33-fixing-the-shape-transition-using-d3transition">Step 3.3 of Lab 9</a> and don’t understand this line:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">label</span> <span class="p">??</span><span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">wedges</span><span class="p">).</span><span class="nx">find</span><span class="p">(([</span><span class="nx">label</span><span class="p">,</span> <span class="nx">w</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">w</span> <span class="o">===</span> <span class="nx">wedge</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Object.entries()</code> and <code class="language-plaintext highlighter-rouge">array.find()</code> is easy to google for, but how do you google for <code class="language-plaintext highlighter-rouge">??=</code> or the <code class="language-plaintext highlighter-rouge">([label, w])</code> syntax?! <strong>That’s what AI is excellent for!</strong></p><p>You could blanket ask it to explain this line of code:</p><figure><p><img src="/labs/debugging/images/chatgpt-explain.png" alt="" /></p><figcaption>Asking ChatGPT to explain a specific line of code (but other AI assistants are similar).</figcaption></figure><p>Or, you could ask about specific things you don’t understand, which tends to give you the answer faster:</p><figure><p><img src="/labs/debugging/images/chatgpt-specific.png" alt="" /></p><figcaption>Asking ChatGPT to explain a specific part of syntax (but other AI assistants are similar)..</figcaption></figure><p><a href="https://docs.github.com/en/copilot/github-copilot-chat/about-github-copilot-chat">GitHub Copilot Chat</a> even has a menu option for this:</p><p><img src="/labs/debugging/images/gh-copilot-explain.png" alt="" /></p><p>This was the result:</p><p><img src="/labs/debugging/images/gh-copilot-explanation.png" alt="" /></p><p class="caveat">Do note that <strong>every time you use AI for anything, it’s <em>crucial</em> to fact-check it</strong>. If you ask it to explain syntax you don’t understand, take the terms it gives you (in this case “logical nullish assignment operator”) and google them to see if they are correct.</p><h3 id="use-correct-formatting"> <a href="#use-correct-formatting" class="anchor-heading" aria-labelledby="use-correct-formatting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use correct formatting</h3><p>It’s very hard to understand what your code is doing if it’s not formatted correctly. Especially <a href="https://en.wikipedia.org/wiki/Indentation_style">indentation</a> is very important as it shows the structure and hiearchy of your code.</p><ul><li>In HTML, if element contents span multiple lines, indent them (unless you have a reason not to).<li>In JS, indent the contents of functions, loops, and conditionals.<li>In CSS indent declarations (the property-value pairs inside the <code class="language-plaintext highlighter-rouge">{...}</code>) and nested rules.</ul><p>Formatting is meant to help readability, not hinder it. There are cases where <em>not</em> indenting actually improves readability, e.g. in HTML, since everything is inside <code class="language-plaintext highlighter-rouge">&lt;html&gt;</code>.</p><p>If you find it hard to maintain good formatting manually, many developers use <a href="https://prettier.io/">Prettier</a> to automatically format their code when they save. It doesn’t give you much flexibility, but is way better than poorly formatted code. VS Code also has a built-in formatter that you can enable in the settings, or call it on a case-by-case basis by opening the <a href="https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette">Command Palette</a> (Ctrl+Shift+P) and typing <code class="language-plaintext highlighter-rouge">Format Document</code>.</p><blockquote class="caveat"><p>While a lot of code formatting is a matter of personal preference, and the main rule is that it’s consistent, there is one exception: those of you who are familiar with other languages, may be used to code styles where the <code class="language-plaintext highlighter-rouge">{</code> is placed in a new line (<a href="https://en.wikipedia.org/wiki/Indentation_style#Allman_style"><em>Allman style</em></a>):</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// code</span>
<span class="p">}</span>
</code></pre></div></div><p><strong>Don’t do this in JS</strong>. Because of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#automatic_semicolon_insertion">semicolon insertion</a>, this can lead to <a href="https://2ality.com/2013/01/brace-styles.html">subtle bugs</a>.</p></blockquote><p>If you don’t like the loss of control that automated formatters require, you should use a <a href="https://en.wikipedia.org/wiki/Lint_(software)">linter</a> like <a href="https://eslint.org/">ESLint</a> or <a href="https://stylelint.io/">stylelint</a> to ensure that the code style you prefer is followed consistently.</p><h2 id="investigation"> <a href="#investigation" class="anchor-heading" aria-labelledby="investigation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Investigation</h2><figure><p><img src="images/debugging-quote.png" /></p><figcaption><p>Quote by <a href="https://fortes.com/2017/one-good-tweet/">Filipe Fortes</a></p></figcaption></figure><p><strong>Investigation</strong> can be broken down further:</p><ul><li><strong>Narrowing Down</strong>: What part of the code is causing the problem?<li><strong>Understanding</strong>: <em>Why</em> is the code not working as expected?</ul><p>Both typically involve making a series of hypotheses, and testing them to see if they are true. In this section, we will discuss strategies for both.</p><p class="important">The very first step for most issues is to look at the <a href="#the-console">console</a> and the terminal where you ran <code class="language-plaintext highlighter-rouge">npm run dev</code>, both of which should already be open if you followed the <a href="#prevention">prevention</a> steps and check for errors.</p><h3 id="general-advice-reducing-the-issue"> <a href="#general-advice-reducing-the-issue" class="anchor-heading" aria-labelledby="general-advice-reducing-the-issue"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General advice: Reducing the issue</h3><p>In the next few sections, we will discuss strategies for specific types of problems. This is a strategy that works <em>regardless</em> of the type of issue you are debugging.</p><p>Generally, <strong>the less code you’re dealing with, the easier debugging becomes</strong>. In most cases, the issue is not in the entire codebase, but in a tiny part of it. The <em>Narrowing Down</em> phase is about figuring out what part of the code is causing the issue.</p><p>If you have a hypothesis about this, you can verify it by removing or commenting out that part of the code and seeing what happens — or removing <em>everything else</em> and making sure that the bug still reproduces. If not, there is always the “brute force approach”, where you simply start removing parts of the code until the issue goes away. This may involve:</p><ul><li>Commenting out entire sections of code<li>Replacing API calls and computed values with hardcoded values<li>Removing event listeners<li>Replacing entire components<li>Using the component with the issue in isolation on a new page</ul><p>This is often called “Creating a reduced testcase” and is also a great process to follow when reporting a bug with one of the tools you’re using. Here are some excellent guides on this exact process:</p><ul><li><a href="https://webkit.org/test-case-reduction/">Test Case Reduction - WebKit</a><li><a href="https://css-tricks.com/reduced-test-cases/">Reduced Test Cases - CSS Tricks</a></ul><p>Code playgrounds can be excellent for creating reduced testcases:</p><ul><li><a href="https://svelte.dev/repl">Svelte REPL</a> for Svelte<li><a href="https://codepen.io/">CodePen</a> for HTML, CSS, and JS</ul><h3 id="problem-1-the-page-looks-wrong"> <a href="#problem-1-the-page-looks-wrong" class="anchor-heading" aria-labelledby="problem-1-the-page-looks-wrong"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Problem 1: The page looks wrong</h3><p>The first step if things don’t quite look right is to verify the HTML structure is what we expect.</p><p>In some cases, especially if you are just getting started with HTML, and before you start using Svelte, the <a href="#html-validator">HTML validation</a> can uncover a lot of issues.</p><p>However, <strong>HTML that is not quite what you expect is not necessarily invalid</strong>, in which case neither Svelte, nor a validator would catch the issue. In that case, the <a href="#dev-tools-elements-panel">Elements panel</a> is the place to be. It can help you <em>both</em> understand the structure of the page, and see the CSS that is <em>actually</em> applied to each element.</p><p>This will immediately resolve issues like:</p><ul><li>Declarations not being applied, either because the property or value is invalid, or because the property only applies to certain elements or when certain other properties have certain values<li>CSS selectors not matching the elements you expect</ul><h3 id="problem-2-the-code-doesnt-work-in-the-way-i-expect"> <a href="#problem-2-the-code-doesnt-work-in-the-way-i-expect" class="anchor-heading" aria-labelledby="problem-2-the-code-doesnt-work-in-the-way-i-expect"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Problem 2: The code doesn’t work in the way I expect</h3><p>It’s a common misconception that we develop a website by slowly getting it to converge to the final state. Think of it instead like a building site: there is scaffolding and tools everywhere while the building is still building built. It’s ok for development to look messy while we are still building.</p><p>Assuming there are no errors, the first step is to <em>understand</em> what the current state is. What are the values of all intermediate variables? What is each function returning?</p><p>For HTML &amp; CSS, we can use the <a href="#dev-tools-elements-panel">Elements panel</a> to see the CSS that is currently applied to each element and the current structure of the DOM tree.</p><p class="tip">For transitions &amp; animations, it helps to set their duration to a very high value (e.g. 3s) as you’re developing them, so that it’s very clear what is actually happening.</p><p>But for JS, the process is a bit more involved. We need to think like a computer: start from the beginning of the code and follow it through, keeping track of the values of all variables in your head. Then we want to make sure that the values are what we expect them to be at each step.</p><p>If the code we are trying to inspect is not called very frequently, we can use <a href="#console-api"><code class="language-plaintext highlighter-rouge">console.log()</code> statements</a> with variables to see what their values are.</p><p class="caveat">If the value we are logging is an object, it will be logged as a reference to the object, not its value. This means we will be seeing the <em>current</em> value of the object, not the value at the time of the <code class="language-plaintext highlighter-rouge">console.log()</code> statement. To see current values, we need to log a copy of the object, e.g. <code class="language-plaintext highlighter-rouge">console.log({...myObject})</code>, or specific values, e.g. <code class="language-plaintext highlighter-rouge">console.log(myObject.myProperty)</code>.</p><p class="tip">VS Code allows us to just type <code class="language-plaintext highlighter-rouge">log</code> and then hit <kbd>Tab</kbd> to get a <code class="language-plaintext highlighter-rouge">console.log()</code> statement with the caret between the parentheses, which can be great for quickly logging things.</p><p>In some cases you may need to rewrite code a bit to make this possible. For example, assume you have an arrow function that just returns a value:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">interpolator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">someFunction</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
</code></pre></div></div><p>If you want to log the return value, you’d need to do something like this:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">interpolator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">someFunction</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div><p>Or you can define a <code class="language-plaintext highlighter-rouge">log()</code> function that returns its first argument:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">log</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div><p>And then you can just wrap values with it:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">interpolator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="nx">someFunction</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
</code></pre></div></div><p>However, if the code is called very frequently, it would be hard to wade through hundreds of log messages. For example, assume we were working on <a href="#step-34-transitioning-between-pies-with-different-technologies">Step 3.4 of Lab 9</a> and trying to debug why our interpolator didn’t work as we expected by logging the CSS we are applying. We’d get something like this:</p><video src="videos/log-animation.mp4" loop="" autoplay="" muted="" class="browser"></video><p>Good luck wading through all these logs!</p><p>In that case, when using Svelte, we can simply print values in the HTML, by using something like <code class="language-plaintext highlighter-rouge">{ myVariable }</code> if it’s a primitive, or something like { JSON.stringify(myVariable) } if it’s an object.</p><p>The downside is that we don’t get historical values, but the upside is that we can see the value <em>right now</em> as it changes.</p><p class="tip">Don’t forget to clean up after you’ve found &amp; fixed the bug, by removing these expressions and/or log statements!</p><p>Lastly, if none of these helps zero in on the issue completely, it may be time for the big guns: the <a href="#debugger-statement"><code class="language-plaintext highlighter-rouge">debugger</code> statement</a> and the <a href="#sources-panel">Sources panel</a>. These allow us to execute our code, see the values of all local variables at each point, and even stop it at certain points and experiment.</p><h3 id="problem-3-500-error"> <a href="#problem-3-500-error" class="anchor-heading" aria-labelledby="problem-3-500-error"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Problem 3: 500 error</h3><p>If you’re lucky, when you make a mistake with Svelte, you will get a nice error display like this:</p><p><img src="/labs/debugging/images/svelte-error-nice.png" alt="" /></p><p>However, other times you will only get something like this:</p><p><img src="images/500.png" class="outline" alt="" /></p><p>In that case, the first step is to look at the terminal panel where you ran <code class="language-plaintext highlighter-rouge">npm run dev</code> to see <em>what</em> the actual error is.</p><p>If the issue is in the JS, it could be easy to read:</p><p><img src="/labs/debugging/images/vite-error.png" alt="ReferenceError: onMount is not defined" /></p><p>However, if the issue is in your Svelte HTML, you may have to wade through your entire component code to get to the actual error:</p><figure> <video src="videos/svelte-html-error.mp4" class="outline" loop="" autoplay="" muted=""></video><figcaption> In this case the actual error is the red text at the top: <q>Element with a slot='...' attribute must be a child of a component or a descendant of a custom element</q></figcaption></figure><h2 id="debugging-tools"> <a href="#debugging-tools" class="anchor-heading" aria-labelledby="debugging-tools"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debugging tools</h2><p>Here we describe the tools you can use to investigate and resolve issues. There are links to these in the text above, but going through this section by itself may be useful for those with more experience, or as a quick reference after you have read the whole guide.</p><h3 id="the-console"> <a href="#the-console" class="anchor-heading" aria-labelledby="the-console"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Console</h3><p>The console is is the second tab in your browser dev tools. It looks like this:</p><video src="https://vis-society.github.io/labs/3/slides/videos/console.mp4" onloadedmetadata="this.currentTime = 50"></video><p>Among other things, the console will show you:</p><ul><li>JS errors<li>Failed HTTP requests (e.g. file not found)<li>Some HTML errors (e.g. invalid value for certain attributes)</ul><blockquote class="fyi"><p><strong>Why doesn’t the browser just notify me when there are errors on the page?</strong></p><p>The browser doesn’t know you’re the website developer, and most web users don’t want to know about JS errors on websites they visit. In fact, early browsers did report them to users, but that went away as browser UIs became more user-friendly, and started targeting less technical folk. In fact, most websites you visit on a daily basis have a cornucopia of JS errors and you’d never know about them unless you open the browser console.</p></blockquote><h3 id="html-validator"> <a href="#html-validator" class="anchor-heading" aria-labelledby="html-validator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> HTML validator</h3><p>The <a href="https://validator.w3.org/">W3C HTML validator</a> is a tool that checks your HTML for errors. You can provide your HTML to it by uploading it, giving it a URL, or perhaps most usefully when developing, <a href="https://validator.w3.org/#validate_by_input">pasting it in directly</a>.</p><p>Svelte markup will throw the validator off, so this becomes less useful as we start using Svelte. You can still validate Svelte’s output, but depending on how much of your code is rendered by the build process, this can be more or less useful. The silver lining is that Svelte also catches some HTML issues itself and then they become <a href="#problem-500-error">500 errors</a>.</p><h3 id="dev-tools-elements-panel"> <a href="#dev-tools-elements-panel" class="anchor-heading" aria-labelledby="dev-tools-elements-panel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dev tools Elements panel</h3><p>It looks like this:</p><video src="videos/elements-panel.mp4" loop="" autoplay="" muted="" class="browser"></video><p>It can help you catch issues in a number of ways. First, it helps you explore the <a href="../2/slides/#dom-tree">DOM structure</a> by expanding and collapsing element contents. This can be very helpful when your elements are not nested in the way you expect, which can be hard to see in source code alone.</p><p>But the elements panel is <em>especially</em> useful to show you the CSS currently applied, which is done in several ways:</p><ul><li>As you hover over each element, it is highlighted and its <a href="../2/slides/#the-box-model">box model</a> is shown (orange for margin, purple for padding).<li>If the element is a grid or flex container, its layout is shown as well.<li>The right panel shows you all the CSS rules that currently apply to the element, whether they come from your CSS or the browser’s, and which ones are overridden by others.</ul><p>The CSS panel shows a bunch of things:</p><ul><li>The CSS rules that apply to the element, and where they come from (your CSS, browser defaults, etc.)<li>The computed styles, which are the final styles that apply to the element after all the rules are applied<li>The box model, which shows you the padding, border, and margin of the element<li>Which CSS properties are being overridden by others?<li>Which CSS properties are inherited from ancestors?<li>Which CSS properties are invalid and thus ignored?<li>Which CSS properties are being ignored because of the values of other properties? For example, Flexbox properties like <code class="language-plaintext highlighter-rouge">flex</code> and <code class="language-plaintext highlighter-rouge">flex-*</code> have no effect if <code class="language-plaintext highlighter-rouge">display</code> is not <code class="language-plaintext highlighter-rouge">flex</code> or <code class="language-plaintext highlighter-rouge">inline-flex</code>. Note that the dependencies between CSS properties are more complex than the dev tools can show, so this will not uncover all such issues.</ul><p>If the issue you are investigating only happens during certain user actions (e.g. <code class="language-plaintext highlighter-rouge">:hover</code>), you can simulate those actions:</p><video src="videos/emulating-hover.mp4" autoplay="" loop="" muted="" class="browser"></video><p>It also allows you to <strong>edit the CSS in real time</strong> and see the page update. This can be incredibly useful both in the <a href="#investigation">investigation</a> and <a href="#resolution">resolution</a> phases. Keep in mind that the browser cannot possibly update your source code, so if you refresh you will lose your changes — you need to remember to copy them over! However, you can see this as a feature, not a bug: you can try out changes in a non-destructive way.</p><p>In addition to editing properties and values, it allows you to quickly remove declarations to see what will happen (which is very useful in the <a href="#investigation">investigation</a> phase)</p><h3 id="console-api"> <a href="#console-api" class="anchor-heading" aria-labelledby="console-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Console API</h3><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console_API">Console API</a> is a set of functions you can use in your JS code to log messages to the console. The one you would be using most often is <a href="https://developer.mozilla.org/en-US/docs/Web/API/console/log_static"><code class="language-plaintext highlighter-rouge">console.log()</code></a> which logs a message to the console. However, <a href="https://developer.mozilla.org/en-US/docs/Web/API/console/trace_static"><code class="language-plaintext highlighter-rouge">console.trace()</code></a> can also be useful if you can’t understand why a certain function is being called.</p><h3 id="debugger-statement"> <a href="#debugger-statement" class="anchor-heading" aria-labelledby="debugger-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">debugger</code> statement</h3><p>The <code class="language-plaintext highlighter-rouge">debugger;</code> statement allows you to stop execution of your code and inspect its current state, as well as the <em>call stack</em>, i.e. how you got there.</p><p>E.g. suppose we’re working on <a href="#step-34-transitioning-between-pies-with-different-technologies">step 3.4 of Lab 9</a> and want to debug why our interpolator didn’t work as we expected.</p><p>We <em>could</em> add <code class="language-plaintext highlighter-rouge">console.log()</code> statements with all the local variables or print them out using Svelte expressions, but in some cases, especially when we have a lot of variables or simpler methods have failed to narrow down the issue, there is a better way: the debugger.</p><p>You can add a <code class="language-plaintext highlighter-rouge">debugger;</code> statement to stop your code at any point and inspect its current state in the <a href="#sources-panel">Sources panel</a>. You can hover over any variable and see its current value. It looks like this:</p><video src="videos/debugger.mp4" loop="" autoplay="" muted="" class="browser"></video><p>The <code class="language-plaintext highlighter-rouge">debugger;</code> statement works like any other JS statement, meaning you can put it inside conditionals as well:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">someCondition</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">debugger</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p class="fyi">These statements create <em>breakpoints</em> in your code, which are points where the code execution stops. You can also set breakpoints manually in the Sources panel, without modifying the code.</p><h3 id="sources-panel"> <a href="#sources-panel" class="anchor-heading" aria-labelledby="sources-panel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sources panel</h3><p>In the previous section we saw how to use <code class="language-plaintext highlighter-rouge">debugger;</code> statements to inspect the state of our code at any point in time. However, the Sources panel does a lot more than that.</p><p>It also allows us to <em>step through</em> our code, meaning we can execute it line by line and see the state of our variables at each point.</p><video src="videos/step-through.mp4" loop="" autoplay="" muted="" class="browser"></video><p>To step through our code, we use this toolbar at the top right: <img src="/labs/debugging/images/step-through-toolbar.png" alt="" />. Here’s what the icons mean:</p><ul><li><img src="/labs/debugging/images/button-resume.png" alt="" /> <strong>Resume execution</strong>: Continue executing the code until the next breakpoint or the end of the script.<li>Buttons 2-5 are all about stepping through the code, i.e. executing the current line and moving to the next one. However, there are different ways you may want to do that, mainly around how low-level you want your inspection to be: do you actually want to see the state within each function called in your code, or only the one you are currently in?<ul><li><img src="/labs/debugging/images/button-step-over.png" alt="" /> <strong>Step over next function call</strong>: This stays within the function you are currently inspecting, without moving into other functions being called. This is the most high level of them all, and the one I suggest you start with. It helps you to get a higher level overview of what is happening in your code, without having to suffer through every single line.<li><img src="/labs/debugging/images/button-step-into.png" alt="" /> <strong>Step into next function call</strong>: If the current line is a function call, move into the function and execute the first line.<li><img src="/labs/debugging/images/button-step-out.png" alt="" /> <strong>Step out of current function</strong>: Execute the rest of the current function and move to the next line <em>after</em> the function call. This is very useful when you realize you don’t actually care about the function you’re in and you know the bug is not there, effectively helping you reverse the decision to step into.<li><img src="/labs/debugging/images/button-step.png" alt="" /> <strong>Step</strong>: Execute the current line and move to the next one, whether that is in another function or in the current one.</ul><li><img src="/labs/debugging/images/button-deactivate-breakpoints.png" alt="" /> <strong>Deactivate breakpoints</strong>: This will deactivate all breakpoints in your code, so that it will run without stopping at any of them. This is useful when you have a lot of breakpoints and you want to run the code without stopping at any of them.</ul><p>It also shows you the <em>call stack</em>, which is the list of functions that have been called to get to the current point. For example, suppose we’re working on <a href="#step-34-transitioning-between-pies-with-different-technjson.stringify(wedges)">step 3.4 of Lab 9</a> and we want to figure out if the <code class="language-plaintext highlighter-rouge">interpolator</code> function was called from a D3 Transition or a Svelte transition. We can look at the call stack, and click on the function that called it (<code class="language-plaintext highlighter-rouge">css</code>): turns out it was a Svelte transition this time!</p><video src="videos/call-stack.mp4" loop="" autoplay="" muted="" class="browser"></video><p class="caveat">Keep in mind that when async code is involved, the call stack may not be as useful as you’d like.</p><h2 id="resolution"> <a href="#resolution" class="anchor-heading" aria-labelledby="resolution"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resolution</h2><p>In most cases, &gt;99% of debugging time is spent narrowing down the problem, and the resolution is typically pretty simple, and often takes seconds (e.g. changing a variable name).</p><p>There is one exception: when the bug is <em>not</em> in our code, but in one of the tools we’re using (D3, Svelte, Mapbox, etc.) or even the browser itself (browsers have bugs too — <a href="https://issues.chromium.org/issues?q=status:open">thousands of them</a>!) In those cases, the right thing to do is to make sure that a bug report already exists, and if not to file one. Make sure to include a reduced testcase in your bug report (see <a href="#general-advice-reducing-the-issue">Reducing the issue</a> above on how to create one). Reduce <em>very</em> aggressively, as a rule of thumb, most testcases are less than 10 lines of (non-boilerplate) code.</p><p>However, we usually cannot wait for a fix, so we need to find a <em>workaround</em>. This means that we need to find a way to get the same functionality, but in a different way that doesn’t trigger the bug.</p><p>Finding a good workaround often involves exactly the same steps as investigating the bug in the first place: narrowing down the issue, understanding why it happens, and what exactly triggers it (make sure to include all your findings in the bug report to save the developers time and increase the odds it may be fixed soon).</p><p>For example, in <a href="../9/#step-27-animated-race">lab 9</a> we had to work around a bug in Svelte’s <code class="language-plaintext highlighter-rouge">animate</code> directive. A quick investigation revealed <a href="https://github.com/sveltejs/svelte/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+animate+flip">many bug reports around similar issues</a>, so we decided not to file another one.</p><p>To investigate the bug, we clicked on <code class="language-plaintext highlighter-rouge">flip</code> from replaced <code class="language-plaintext highlighter-rouge">import {flip} from 'svelte/animate';</code> to get the <code class="language-plaintext highlighter-rouge">flip</code> source code, then pasted it as a plain function in our own code. Then started adding <code class="language-plaintext highlighter-rouge">console.log()</code> statements. We found that the problem was related to the part that is executed before each transition only getting executed once (instead of once per transition), so the positions it was capturing were getting progressively more and more out of sync.</p><p>A workaround was to try and <em>fool</em> Svelte into thinking that every time we were transitioning, we were using a brand new function:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">flip</span> <span class="k">as</span> <span class="nx">originalFlip</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">svelte/animate</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">getFlip</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">originalFlip</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// This will get called every time files changes:</span>
<span class="nl">$</span><span class="p">:</span> <span class="nx">flip</span> <span class="o">=</span> <span class="nx">getFlip</span><span class="p">(</span><span class="nx">files</span><span class="p">);</span>
</code></pre></div></div><p>Workarounds are fragile. They may break with future updates to the library, or they may not work in all cases. E.g. in this case, if Svelte updates to be smarter abound dependencies and realize that <code class="language-plaintext highlighter-rouge">getFlip()</code> returns the same function every time, our workaround will break. This is why it’s important to report these bugs, so they can be fixed in the long term. Workarounds should be seen as a temporary bandaid, not a long-term solution.</p><p class="fyi">In some cases, even the underlying technologies can be buggy! For example, when I was working on Lab 9 I <a href="https://github.com/w3c/csswg-drafts/issues/10195">reported</a> the default SVG arc interpolation as a bug.</p><h2 id="conclusion"> <a href="#conclusion" class="anchor-heading" aria-labelledby="conclusion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conclusion</h2><p>Debugging is the least fun part of programming, despite it also being the biggest chunk of it. Especially in the beginning, it’s absolutely normal to spend about 5% writing code and 95% debugging it. But even as you gain experience, debugging will often occupy around 70% of your time developing anything.</p><figure><p><img src="/labs/debugging/images/works-first-time.jpg" alt="" /></p><figcaption> Even seasoned programmers are _surprised_ when their code works the first time. Image source: [5 traits to go from Junior to Senior Software Engineer - DEV Community](https://dev.to/jenesh/5-traits-to-go-from-junior-to-senior-software-engineer-11ol)</figcaption></figure><p><strong>It’s important to remember that <em>everyone</em> spends a fair bit time debugging, even programmers with decades of experience.</strong> Programming is a completely different communication paradigm than anything else we do. Natural (human) languages are full of ambiguity. There is so much that is simply implied in every sentence, and the other humans can just infer it.</p><p>In programming, we have to tell the computer <em>exactly</em> what to do, with detailed steps that leave no room for ambiguity. This can be very hard as it goes against everything we have ever learned about communication!</p><p class="note">AI may change this in the future, there are a lot of efforts to make programming more like natural language, but we’re not there yet.</p><p><strong>Never feel like making mistakes and having to debug them is a personal failing of yours.</strong> It’s a crappy part of programming, but one that we all go though.</p></div></div><div class="search-overlay"></div></div>
